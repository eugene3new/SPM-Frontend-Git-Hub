const chalk = require("chalk");
const simpleGit = require("simple-git");

const con = require("./constants");

exports.checkGitStatus = async function () {
  const git = simpleGit();

  return await git.status().then((res) => {
    if (res.modified.length > 0) {
      console.log(
        chalk.red(
          `${con.stateMessages.failure}: Pending Git Changes, Please commit changes and re-run the command.`
        )
      ),
        "\n";
      return false;
    } else {
      console.log(`${con.stateMessages.success}`, "\n");
      return true;
    }
  });
};
